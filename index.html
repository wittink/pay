<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>송금 안내</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 flex items-center justify-center min-h-screen p-4">
    <div class="w-full max-w-sm mx-auto bg-white rounded-3xl shadow-2xl p-8">
        <h2 class="text-xl font-bold text-center mb-6 text-gray-800">계좌 정보를 확인해주세요</h2>
        
        <div id="infoCard" class="bg-blue-50 border-2 border-blue-200 rounded-2xl p-6 text-center mb-8">
            <div id="displayBank" class="text-blue-600 font-bold text-lg leading-tight">은행 정보 로딩중...</div>
            <div id="displayAcc" class="text-2xl font-mono font-bold my-2 tracking-tight text-gray-900">000-000-0000</div>
            <div id="displayName" class="text-sm font-medium text-gray-500">예금주 로딩중...</div>
        </div>
        
        <button id="confirmBtn" onclick="handleConfirm()" 
            class="w-full py-4 bg-blue-600 text-white rounded-2xl font-bold text-lg shadow-lg hover:bg-blue-700 active:scale-95 transition-all mb-4">
            계좌번호 확인 및 복사하기
        </button>
        
        <div id="bankList" class="hidden pt-4 border-t border-gray-100">
            <p class="text-center text-xs text-gray-500 mb-4 font-medium">✓ 복사 완료! 입금하실 앱을 선택하세요</p>
            
            <div class="grid grid-cols-3 gap-3">
                <button onclick="goApp('kakaobank://')" class="flex flex-col items-center justify-center p-3 bg-white rounded-xl shadow border border-gray-100">
                    <div class="w-10 h-10 bg-[#FFEB00] rounded-full flex items-center justify-center text-[#3C1E1E] text-lg font-bold mb-1">카</div>
                    <span class="text-[11px] font-medium text-gray-700">카카오뱅크</span>
                </button>
                <button onclick="goApp('kbank://')" class="flex flex-col items-center justify-center p-3 bg-white rounded-xl shadow border border-gray-100">
                    <div class="w-10 h-10 bg-[#FFB800] rounded-full flex items-center justify-center text-white text-lg font-bold mb-1">K</div>
                    <span class="text-[11px] font-medium text-gray-700">케이뱅크</span>
                </button>
                <button onclick="goApp('toss://')" class="flex flex-col items-center justify-center p-3 bg-white rounded-xl shadow border border-gray-100">
                    <div class="w-10 h-10 bg-[#0064FF] rounded-full flex items-center justify-center text-white text-lg font-bold mb-1">토</div>
                    <span class="text-[11px] font-medium text-gray-700">토스뱅크</span>
                </button>
                <button onclick="goApp('kbbank://')" class="flex flex-col items-center justify-center p-3 bg-white rounded-xl shadow border border-gray-100">
                    <div class="w-10 h-10 bg-[#FFBC00] rounded-full flex items-center justify-center text-white text-lg font-bold mb-1">KB</div>
                    <span class="text-[11px] font-medium text-gray-700">KB국민</span>
                </button>
                <button onclick="goApp('shinhan-sr-app://')" class="flex flex-col items-center justify-center p-3 bg-white rounded-xl shadow border border-gray-100">
                    <div class="w-10 h-10 bg-[#0046FF] rounded-full flex items-center justify-center text-white text-lg font-bold mb-1">신</div>
                    <span class="text-[11px] font-medium text-gray-700">신한</span>
                </button>
                <button onclick="goApp('wbbank://')" class="flex flex-col items-center justify-center p-3 bg-white rounded-xl shadow border border-gray-100">
                    <div class="w-10 h-10 bg-[#0094CE] rounded-full flex items-center justify-center text-white text-lg font-bold mb-1">우</div>
                    <span class="text-[11px] font-medium text-gray-700">우리</span>
                </button>
                <button onclick="goApp('hanabank://')" class="flex flex-col items-center justify-center p-3 bg-white rounded-xl shadow border border-gray-100">
                    <div class="w-10 h-10 bg-[#008485] rounded-full flex items-center justify-center text-white text-lg font-bold mb-1">하</div>
                    <span class="text-[11px] font-medium text-gray-700">하나</span>
                </button>
                <button onclick="goApp('nhbank://')" class="flex flex-col items-center justify-center p-3 bg-white rounded-xl shadow border border-gray-100">
                    <div class="w-10 h-10 bg-[#00A651] rounded-full flex items-center justify-center text-white text-lg font-bold mb-1">NH</div>
                    <span class="text-[11px] font-medium text-gray-700">NH농협</span>
                </button>
                <button onclick="goApp('ibkbank://')" class="flex flex-col items-center justify-center p-3 bg-white rounded-xl shadow border border-gray-100">
                    <div class="w-10 h-10 bg-[#004A98] rounded-full flex items-center justify-center text-white text-lg font-bold mb-1">IB</div>
                    <span class="text-[11px] font-medium text-gray-700">기업</span>
                </button>
                <button onclick="goApp('postbank://')" class="flex flex-col items-center justify-center p-3 bg-white rounded-xl shadow border border-gray-100">
                    <div class="w-10 h-10 bg-[#E50012] rounded-full flex items-center justify-center text-white text-lg font-bold mb-1">우</div>
                    <span class="text-[11px] font-medium text-gray-700">우체국</span>
                </button>
                <button onclick="goApp('suhyupbank://')" class="flex flex-col items-center justify-center p-3 bg-white rounded-xl shadow border border-gray-100">
                    <div class="w-10 h-10 bg-[#0066B3] rounded-full flex items-center justify-center text-white text-lg font-bold mb-1">수</div>
                    <span class="text-[11px] font-medium text-gray-700">수협</span>
                </button>
                <button onclick="location.reload()" class="flex flex-col items-center justify-center p-3 bg-gray-100 rounded-xl shadow border border-gray-200">
                    <div class="w-10 h-10 bg-gray-400 rounded-full flex items-center justify-center text-white text-lg font-bold mb-1">↻</div>
                    <span class="text-[11px] font-medium text-gray-600">다시</span>
                </button>
            </div>
        </div>
    </div>
    
    <script>
        const params = new URLSearchParams(window.location.search);
        const bank = params.get('bank') || '은행 정보 없음';
        const acc = params.get('acc') || '';
        const name = params.get('name') || '예금주 미지정';
        
        document.getElementById('displayBank').innerText = bank;
        document.getElementById('displayAcc').innerText = acc || '계좌번호 없음';
        document.getElementById('displayName').innerText = `예금주: ${name}`;
        
        function handleConfirm() {
            if (!acc) return alert("계좌번호가 없습니다.");
            
            // 복사 실행
            const el = document.createElement('textarea');
            el.value = acc;
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);

            document.getElementById('confirmBtn').classList.add('hidden');
            document.getElementById('bankList').classList.remove('hidden');
        }

        // 앱 실행 전용 함수 (군더더기 삭제)
        function goApp(url) {
            // 1. 새 창이나 아이프레임 없이 현재 창에서 바로 호출 (가장 강력한 방식)
            location.href = url;
            
            // 2. 만약 1초 뒤에도 아무 반응이 없다면 (웹뷰나 일부 환경)
            setTimeout(function() {
                if (!document.hidden) {
                    // 사용자에게 수동 실행 안내 (강제 alert 삭제)
                    console.log("앱 실행 시도 완료");
                }
            }, 1000);
        }
    </script>
</body>
</html>
