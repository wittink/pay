<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>송금 안내</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 flex items-center justify-center min-h-screen p-4">
    <div class="w-full max-w-sm mx-auto bg-white rounded-3xl shadow-2xl p-8 text-center">
        <h2 class="text-xl font-bold mb-6 text-gray-800">계좌 정보를 확인해주세요</h2>
        
        <div class="bg-blue-50 border-2 border-blue-200 rounded-2xl p-6 mb-8">
            <div id="displayBank" class="text-blue-600 font-bold text-lg">은행</div>
            <div id="displayAcc" class="text-2xl font-mono font-bold my-2 text-gray-900">000-000-0000</div>
            <div id="displayName" class="text-sm font-medium text-gray-500">예금주</div>
        </div>
        
        <button id="confirmBtn" onclick="handleConfirm()" 
            class="w-full py-4 bg-blue-600 text-white rounded-2xl font-bold text-lg shadow-lg active:scale-95 transition-all">
            계좌번호 복사 및 은행 열기
        </button>

        <p class="mt-4 text-xs text-gray-400">버튼을 누르면 설치된 은행 앱 목록이 나타납니다.</p>
    </div>

<script>
const params = new URLSearchParams(window.location.search);
const acc = params.get('acc') || '';
document.getElementById('displayBank').innerText = params.get('bank') || '은행';
document.getElementById('displayAcc').innerText = acc;
document.getElementById('displayName').innerText = `예금주: ${params.get('name') || ''}`;

// 주소창 지우기
if (window.location.search) window.history.replaceState({}, document.title, window.location.pathname);

function handleConfirm() {
    if (!acc) return alert('계좌 정보가 없습니다.');

    // 1. 계좌번호 복사
    const el = document.createElement('textarea');
    el.value = acc;
    document.body.appendChild(el);
    el.select();
    document.execCommand('copy');
    document.body.removeChild(el);

    // 2. 안드로이드 앱 선택기(연결 프로그램) 호출
    // 'bankid://' 또는 'supertoss://' 같은 공통 스킴을 던져서 시스템이 앱을 찾게 함
    const ua = navigator.userAgent.toLowerCase();
    if (ua.includes('android')) {
        // 금융 관련 앱들을 불러오는 가장 범용적인 인텐트 방식입니다.
        location.href = `intent://#Intent;action=android.intent.action.VIEW;scheme=kakaobank;package=com.kakaobank.channel;end`;
        
        // 위 방식이 특정 앱으로 쏠린다면, 아래의 범용 호출을 시도합니다.
        setTimeout(() => {
            location.href = `intent://#Intent;action=android.intent.action.VIEW;category=android.intent.category.BROWSABLE;parseContext=true;end`;
        }, 500);
    } else {
        alert("계좌가 복사되었습니다! 은행 앱을 열어주세요.");
    }
}
</script>
</body>
</html>
