<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>송금 안내</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 flex items-center justify-center min-h-screen p-4">
    <div class="w-full max-w-sm mx-auto bg-white rounded-3xl shadow-2xl p-8">
        <h2 class="text-xl font-bold text-center mb-6 text-gray-800">계좌 정보를 확인해주세요</h2>
        
        <div id="infoCard" class="bg-blue-50 border-2 border-blue-200 rounded-2xl p-6 text-center mb-8">
            <div id="displayBank" class="text-blue-600 font-bold text-lg leading-tight">은행 정보 로딩중...</div>
            <div id="displayAcc" class="text-2xl font-mono font-bold my-2 tracking-tight text-gray-900">000-000-0000</div>
            <div id="displayName" class="text-sm font-medium text-gray-500">예금주 로딩중...</div>
        </div>
        
        <button id="confirmBtn" onclick="handleConfirm()" 
            class="w-full py-4 bg-blue-600 text-white rounded-2xl font-bold text-lg shadow-lg hover:bg-blue-700 active:scale-95 transition-all mb-4">
            계좌번호 확인 및 복사하기
        </button>
        
        <div id="bankList" class="hidden pt-4 border-t border-gray-100">
            <p class="text-center text-xs text-gray-500 mb-4 font-medium">✓ 복사 완료! 입금하실 앱을 선택하세요</p>
            
            <div class="grid grid-cols-3 gap-3">
                <button onclick="openApp('kakaobank')" class="bank-btn">카카오뱅크</button>
                <button onclick="openApp('kbank')" class="bank-btn">케이뱅크</button>
                <button onclick="openApp('toss')" class="bank-btn">토스</button>
                <button onclick="openApp('kb')" class="bank-btn">KB국민</button>
                <button onclick="openApp('shinhan')" class="bank-btn">신한</button>
                <button onclick="openApp('woori')" class="bank-btn">우리</button>
            </div>
        </div>
    </div>

<script>
const params = new URLSearchParams(window.location.search);
const bank = params.get('bank') || '은행 정보 없음';
const acc = params.get('acc') || '';
const name = params.get('name') || '예금주 미지정';

document.getElementById('displayBank').innerText = bank;
document.getElementById('displayAcc').innerText = acc || '계좌번호 없음';
document.getElementById('displayName').innerText = `예금주: ${name}`;

function handleConfirm() {
    if (!acc) {
        alert("❌ 계좌 정보가 없습니다.");
        return;
    }
    navigator.clipboard.writeText(acc).then(() => {
        document.getElementById('confirmBtn').classList.add('hidden');
        document.getElementById('bankList').classList.remove('hidden');
    }).catch(() => {
        alert(`복사 실패: ${acc}\n직접 복사해주세요.`);
    });
}

const bankLinks = {
    kakaobank: {
        android: 'intent://main#Intent;scheme=kakaobank;package=com.kakaobank.channel;end',
        ios: 'kakaobank://'
    },
    kbank: {
        android: 'intent://main#Intent;scheme=kbank;package=com.kbankwith.smartbank;end',
        ios: 'kbank://'
    },
    toss: {
        android: 'intent://#Intent;scheme=toss;package=viva.republica.toss;end',
        ios: 'toss://'
    },
    kb: {
        android: 'intent://#Intent;scheme=kbbank;package=com.kbstar.kbbank;end',
        ios: 'kbbank://'
    },
    shinhan: {
        android: 'intent://#Intent;scheme=shinhan-sr-app;package=com.shinhan.sbanking;end',
        ios: 'shinhan-sr-app://'
    },
    woori: {
        android: 'intent://#Intent;scheme=wbbank;package=com.wooribank.smart;end',
        ios: 'wbbank://'
    }
};

function openApp(bankKey) {
    const ua = navigator.userAgent.toLowerCase();
    const isAndroid = ua.includes('android');
    const isIOS = /iphone|ipad|ipod/.test(ua);

    const link = bankLinks[bankKey];
    if (!link) {
        alert('지원하지 않는 은행입니다');
        return;
    }

    if (isAndroid) {
        location.href = link.android;
    } else if (isIOS) {
        location.href = link.ios;
    } else {
        alert('모바일에서만 사용 가능합니다');
    }
}
</script>
</body>
</html>
